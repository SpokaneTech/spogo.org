# Meetup on 2024-11-12

* https://www.meetup.com/spokane-go-users-group/events/304227405

Seth will present on sqlc, SQLite, and potentially using the SQLite WAL file with NATS.

Brennon will present on building a work queue with NATS.

## Code

This isn't the real code, I just needed something to illustrate that things were worked on!

```go
package main

import (
    "context"
    "database/sql"
    "fmt"
    "log"
    "os"
    "time"

    _ "github.com/mattn/go-sqlite3"
)

func main() {
    db, err := sql.Open("sqlite3", "file::memory:?cache=shared")
    if err != nil {
        log.Fatal(err)
    }
    defer db.Close()

    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)
    defer cancel()

    if err := db.PingContext(ctx); err != nil {
        log.Fatal(err)
    }

    fmt.Println("Connected to the database")

    // Create a table
    _, err = db.ExecContext(ctx, `
        CREATE TABLE IF NOT EXISTS users (
            id INTEGER PRIMARY KEY,
            name TEXT NOT NULL
        )
    `)
    if err != nil {
        log.Fatal(err)
    }

    // Insert a record
    _, err = db.ExecContext(ctx, `
        INSERT INTO users (name) VALUES ('Seth')
    `)
    if err != nil {
        log.Fatal(err)
    }

    // Query the database
    rows, err := db.QueryContext(ctx, "SELECT id, name FROM users")
    if err != nil {
        log.Fatal(err)
    }
    defer rows.Close()

    for rows.Next() {
        var id int
        var name string
        if err := rows.Scan(&id, &name); err != nil {
            log.Fatal(err)
        }
        fmt.Printf("ID: %d, Name: %s\n", id, name)
    }
}
```